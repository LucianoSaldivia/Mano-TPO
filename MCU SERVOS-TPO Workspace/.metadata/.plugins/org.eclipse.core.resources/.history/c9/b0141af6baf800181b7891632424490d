/*******************************************************************************************************************************//**
 *
 * @file		MDE_Guante_Mano.c
 * @brief		--Descripción del Módulo--
 * @date		Dec 04, 2018
 * @author		Esteban Chiama
 *
 **********************************************************************************************************************************/

/***********************************************************************************************************************************
 *** INCLUDES
 **********************************************************************************************************************************/
#include "MDE_Guante_Mano.h"
/***********************************************************************************************************************************
 *** DEFINES PRIVADOS AL MODULO
 **********************************************************************************************************************************/

// estado
#define RESET		20
#define	INACTIVE	21
#define ACTIVE		22

/***********************************************************************************************************************************
 *** MACROS PRIVADAS AL MODULO
 **********************************************************************************************************************************/

/***********************************************************************************************************************************
 *** TIPOS DE DATOS PRIVADOS AL MODULO
 **********************************************************************************************************************************/

/***********************************************************************************************************************************
 *** TABLAS PRIVADAS AL MODULO
 **********************************************************************************************************************************/

/***********************************************************************************************************************************
 *** VARIABLES GLOBALES PUBLICAS
 **********************************************************************************************************************************/

/***********************************************************************************************************************************
 *** VARIABLES GLOBALES PRIVADAS AL MODULO
 **********************************************************************************************************************************/

static volatile uint8_t estado_Guante_Mano = RESET;

/***********************************************************************************************************************************
 *** PROTOTIPO DE FUNCIONES PRIVADAS AL MODULO
 **********************************************************************************************************************************/

 /***********************************************************************************************************************************
 *** FUNCIONES PRIVADAS AL MODULO
 **********************************************************************************************************************************/

 /***********************************************************************************************************************************
 *** FUNCIONES GLOBALES AL MODULO
 **********************************************************************************************************************************/

void MDE_Guante_Mano(volatile uint8_t *main_status){
	uint8_t key = 0;

	// caso: otra MDE en uso.
	if( (*main_status == BUSY) && (estado_medidor == MEDIDOR_INACTIVO) ){
		return;
	}

	switch(estado_Guante_Mano){

	case RESET:
		estado_Guante_Mano = INACTIVE;
		break;

	case INACTIVE:
		key = GetKey();
		// caso: Botón de comienzo
		if( key == SW1 ){
			key = NO_KEY;
			estado_Guante_Mano = ACTIVE;
			LCD_DisplayMsg( "M: Guante -> Mano", LCD_RENGLON_1, 0);
		}
		break;

	case ACTIVE:
		key = GetKey();

		// caso: terminar
		if( key == SW1 ){
			key = NO_KEY;
			estado_Guante_Mano = INACTIVE;
			LCD_DisplayMsg("> MANO INACTIVA.", LCD_RENGLON_1, 0);
		}
		break;

	default:
		estado_Guante_Mano = INACTIVE;
		break;

	}
}
